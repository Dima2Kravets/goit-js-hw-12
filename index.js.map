{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getImagesByQuery(query, page) {\n  const params = new URLSearchParams({\n    key: '50818565-86d44cf91814c3f45e3f7ee49',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page,\n  });\n  const resp = await axios(`https://pixabay.com/api/?${params}`);\n  return resp.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loaderTop = document.querySelector('#loader-top');\nconst loaderBottom = document.querySelector('#loader-bottom');\nexport const btnLoad = document.querySelector('.btn-load');\n\nexport const lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"card\">\n          <p><span>üëç Likes</span>${likes}</p>\n          <p><span>üëÅ Views</span>${views}</p>\n          <p><span>üí¨ Comments</span>${comments}</p>\n          <p><span>‚¨á Downloads</span>${downloads}</p>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showLoaderTop() {\n  loaderTop.classList.remove('hidden');\n}\n\nexport function hideLoaderTop() {\n  loaderTop.classList.add('hidden');\n}\n\nexport function showLoaderBottom() {\n  loaderBottom.classList.remove('hidden');\n}\n\nexport function hideLoaderBottom() {\n  loaderBottom.classList.add('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  btnLoad.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n  btnLoad.classList.remove('hidden');\n}\n\nexport function scrollAfterLoad() {\n  const firstCard = document.querySelector('.gallery-item');\n  if (!firstCard) return;\n  const cardHeight = firstCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  lightbox,\n  createGallery,\n  clearGallery,\n  showLoaderTop,\n  hideLoaderTop,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  showLoaderBottom,\n  hideLoaderBottom,\n  btnLoad,\n  scrollAfterLoad,\n} from './js/render-functions';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\n\nlet page = 1;\n\nlet per_page = 15;\n\nlet totalHits;\n\nlet query;\n\nlet totalPage;\n\nform.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  clearGallery();\n  page = 1;\n  showLoaderTop();\n  hideLoadMoreButton();\n  query = event.target.elements[0].value.trim();\n  console.log(query);\n  if (!query) {\n    hideLoaderTop();\n    iziToast.warning({\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    return;\n  }\n  try {\n    const response = await getImagesByQuery(query, page);\n    totalHits = response.totalHits;\n    totalPage = Math.ceil(totalHits / per_page);\n    if (page < totalPage) {\n      showLoadMoreButton();\n    }\n    if (response.hits.length === 0) {\n      hideLoaderTop();\n      hideLoadMoreButton();\n      clearGallery();\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: `topRight`,\n      });\n\n      return;\n    }\n    gallery.innerHTML = createGallery(response.hits);\n    lightbox.refresh();\n    hideLoaderTop();\n  } catch (error) {\n    console.error('Error:', error);\n    hideLoaderTop();\n    clearGallery();\n    iziToast.error({\n      message: 'Error loading images',\n      position: `topRight`,\n    });\n  }\n}\n\nbtnLoad.addEventListener('click', handleClick);\nasync function handleClick(event) {\n  showLoaderBottom();\n  page += 1;\n  try {\n    const response = await getImagesByQuery(query, page);\n    gallery.insertAdjacentHTML('beforeend', createGallery(response.hits));\n    lightbox.refresh();\n    hideLoaderBottom();\n    scrollAfterLoad();\n    if (page >= totalPage) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: `topRight`,\n      });\n    }\n  } catch (error) {\n    clearGallery();\n    hideLoaderBottom();\n    hideLoadMoreButton();\n    iziToast.error({\n      message: 'Error loading images',\n      position: `topRight`,\n    });\n  }\n}\n"],"names":["getImagesByQuery","query","page","params","axios","loaderTop","loaderBottom","btnLoad","lightbox","SimpleLightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","gallery","showLoaderTop","hideLoaderTop","showLoaderBottom","hideLoaderBottom","hideLoadMoreButton","showLoadMoreButton","scrollAfterLoad","firstCard","cardHeight","form","per_page","totalHits","totalPage","handleSubmit","event","iziToast","response","error","handleClick"],"mappings":"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"}